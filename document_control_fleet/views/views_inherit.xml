<openerp>
  <data>
  
    <record model="ir.ui.view" id="document_control_base.document_form_fleet">
	  <field name="model">document_control_base.document</field>
      <field name="inherit_id" ref="document_control_base.document_form" />
      <field name="arch" type="xml">
      	
      	<field name="res_partner_id" position="after">
					<field name="fleet_vehicle_id" attrs="{'invisible':[('res_type', '!=', 'fleet.vehicle')],'required':[('res_type','=','fleet.vehicle')]}" class="oe_edit_only  oe_inline"/>
      	</field>

		<field name="expiration_id" position="attributes">
<!-- 				<attribute name="context">{'form_view_ref': 'document_control_base.expiration_form','resources':'expirations','name':'Vencimiento:','res_partner_id':res_partner_id,'fleet_vehicle_id':fleet_vehicle_id,'document_name_id':document_name_id}</attribute> -->
<!--             <attribute name="context" add=" py.PY_setItem(py.evaluate(expr.first, context),'fleet_vehicle_id', fleet_vehicle_id)" separator=" "></attribute> -->
            <attribute name="context" merge="{'fleet_vehicle_id':fleet_vehicle_id}" separator=","></attribute>
            
		</field>

	  </field>
	 </record>

    <record model="ir.ui.view" id="document_control_base.document_set_form_fleet">
	  <field name="model">document_control_base.document_set</field>
      <field name="inherit_id" ref="document_control_base.document_set_form" />
      <field name="arch" type="xml">
      
		<field name="partner_ids" position="after">
			<field name="fleet_vehicle_ids">
			
				<tree limit="5">
					<field name="license_plate"/>
					<field name="model_id"/>
					<field name="state_id"/>
				</tree>
			
			</field>
		</field>
      
      </field>
    </record>


		<record id="document_control_base.document_set_document_rel_list_fleet" model="ir.ui.view">
			<field name="model">document_control_base.document_set_document_rel</field>
		    <field name="inherit_id" ref="document_control_base.document_set_document_rel_list" />
			<field name="arch" type="xml">
					<field name="res_partner_id" position="after">

		                <field name="fleet_vehicle_id"/>
<!-- 		                 attrs="{'invisible':[('res_type', '!=', 'fleet.vehicle')]}"  -->
					</field>
			</field>
		</record>


		<record id="document_control_base.document_set_document_rel_form_fleet" model="ir.ui.view">
			<field name="model">document_control_base.document_set_document_rel</field>
		    <field name="inherit_id" ref="document_control_base.document_set_document_rel_form" />
			<field name="arch" type="xml">
				<field name="res_partner_id" position="after">
					<field name="fleet_vehicle_id" class="oe_inline" attrs="{'invisible':[('res_type', '!=', 'fleet.vehicle')]}" />
				</field>
			</field>
		</record>

        <record id="document_control_fleet.fleet_vehicle_form" model="ir.ui.view">
			<field name="name">fleet.vehicle.form.docs.fleet</field>
			<field name="model">fleet.vehicle</field>
			<field name="inherit_id" ref="fleet.fleet_vehicle_form" />
			<field name="arch" type="xml">
				<div class="oe_title" position="after">
					<field name="id" invisible="1"/>
					<label for="resource_condition_ids"/>
		            <field name="resource_condition_ids" widget="many2many_tags"  domain="[('res_type','=','fleet.vehicle')]"/>
					<label for="document_ids" attrs="{'invisible':[('id','=',False)]}" />
                    <field name="document_ids"  attrs="{'invisible':[('id','=',False)]}" context="{'default_res_type':'fleet.vehicle','default_fleet_vehicle_id':id}"/>
				</div>

			</field>
		</record>


  </data>
</openerp>